# **Week 1 ARTS**

## **[R] 470. Implement Rand10() Using Rand7()**

### THINKING
1) 两次rand7 可生成49个数，用前40个等概率的表示1-10, 如果生成的数大于40，重新随机（概率不变）
2) 代码层面上，可在满足条件是再返回结果，否则继续rand7

### CODE - Solution 1
```
class Solution:
    def rand10(self):
        """
        :rtype: int
        """
        first = rand7()
        second = rand7()

        x = (first - 1) * 7 + second

        if x <= 40:
            r = x % 10
            return 10 if r == 0 else r
        else:
            return self.rand10()
```

### CODE - Solution 2 (No recursive)
```
class Solution:
    def rand10(self):
        """
        :rtype: int
        """
        while(True):
            first = rand7()
            second = rand7()

            x = (first - 1) * 7 + second

            if x <= 40:
                r = x % 10
                return 10 if r == 0 else r

```
## **[T] flask jwt 自定义返回值**

使用flask jwt 时，有时为了与自身代码的返回格式统一，需要自定义返回值，示例代码如下：

```
    jwt = JWT(backend, authenticate, identity)  # noqa

    @jwt.auth_response_handler
    def customized_response_handler(access_token, identity):
        """自定义返回值
        """
        ret = {
            'code': 200,
            'msg': 'success',
            'data': {
                'res': 200,
                'access_token': access_token.decode('utf-8'),
                'user_id': identity.id
            }
        }
        return jsonify(ret)

    @jwt.jwt_error_handler
    def customized_error_handler(error):
        ret = {
            'code': 200,
            'msg': 'success',
            'data': {
                'res': error.status_code,
                'msg': error.description
            }
        }
        return jsonify(ret)
```
注意很多文档中给的jwt.error_handler这个装饰器是错误的，正确的应该是jwt.jwt_error_handler

参考文档:
[Advanced configuration of Flask-JWT](http://blog.tecladocode.com/learn-python-advanced-configuration-of-flask-jwt/)
[Flask-JWT](https://pythonhosted.org/Flask-JWT/)
